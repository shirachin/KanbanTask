$base-color: (
    "primary": (
        "lightness": 0.6469,
        "chroma": 0.2745,
        "hue": 30.18,
    ),
    "secondary": (
        "lightness": 0.9,
        "chroma": 0.15,
        "hue": 260,
    ),
);

// 色設定値参考
// https://oklch.com

@function calc-color($color-name, $lightnessLevel: 50) {
    // $color-name: 基準色の名前（"primary" または "secondary"）
    // $lightnessLevel: 明度レベル（0から100、50が基準色）
    
    // 基準色を取得
    $color-config: map-get($base-color, $color-name);
    $hue: map-get($color-config, "hue");
    $base-chroma: map-get($color-config, "chroma");
    $base-lightness: map-get($color-config, "lightness");

    // レベルを0-1の範囲に正規化
    $t: 0;
    @if $lightnessLevel < 50 {
        // 基準色から黒へ（明度を下げる）
        $t: (50 - $lightnessLevel) / 50; // 0から1.0（50→0, 0→1.0）
    } @else if $lightnessLevel > 50 {
        // 基準色から白へ（明度を上げる）
        $t: ($lightnessLevel - 50) / 50; // 0から1.0（50→0, 100→1.0）
    }

    // 明度を計算
    $l: $base-lightness;
    @if $lightnessLevel < 50 {
        // 基準色から黒へ（明度を下げる）
        $l: $base-lightness * (1 - $t);
    } @else if $lightnessLevel > 50 {
        // 基準色から白へ（明度を上げる）
        $l: $base-lightness + (1.0 - $base-lightness) * $t;
    }
    
    // 明度を0-1の範囲にクランプ
    @if $l < 0 { $l: 0; }
    @if $l > 1 { $l: 1; }

    // 彩度を計算（両方向で彩度を下げる）
    $c: $base-chroma;
    @if $lightnessLevel != 50 {
        $c: $base-chroma * (1 - $t);
    }
    
    // 彩度を0-1の範囲にクランプ
    @if $c < 0 { $c: 0; }
    @if $c > 1 { $c: 1; }

    // 色を計算して返す
    @return oklch($l $c $hue);
}

@function calc-color-primary($lightnessLevel: 50) {
    @return calc-color("primary", $lightnessLevel);
}

@function calc-color-secondary($lightnessLevel: 50) {
    @return calc-color("secondary", $lightnessLevel);
}

// 基本カラー変数（既存のコードとの互換性のため）
$primary-color: calc-color-primary(50);
$primary-hover: calc-color-primary(49);
$primary-gradient-start: calc-color-primary(52);
$primary-gradient-end: calc-color-primary(48);

// 背景色
$background-dark: oklch(0.20 0.01 0deg);
$background-light: oklch(1.0 0 0deg);
$background-gray: oklch(0.97 0.005 0deg);
$background-gray-hover: oklch(0.93 0.005 0deg);

// テキスト色
$text-primary: oklch(0.25 0.01 0deg);
$text-secondary: oklch(0.45 0.01 0deg);
$text-white: oklch(0.95 0 0deg);

// ボーダー色
$border-color: oklch(0.90 0.01 0deg);

// シャドウ
$shadow-sm: 0 2px 4px oklch(0 0 0deg / 0.1);
$shadow-md: 0 2px 8px oklch(0 0 0deg / 0.1);
$shadow-lg: 0 4px 16px oklch(0 0 0deg / 0.15);
$shadow-primary: 0 5px 15px oklch(0.9 0.15 260deg / 0.4);
$shadow-primary-sm: 0 2px 8px oklch(0.9 0.15 260deg / 0.3);

// CSS変数としてエクスポート（JavaScriptから使用可能）
:root {
  // $base-colorマップから動的にグラデーションを生成
  @each $color-name, $color-config in $base-color {
    // 基準色の設定値をエクスポート
    --base-#{$color-name}-hue: #{map-get($color-config, "hue")};
    --base-#{$color-name}-chroma: #{map-get($color-config, "chroma")};
    --base-#{$color-name}-lightness: #{map-get($color-config, "lightness")};

    // グラデーション（0から100まで、すべてのレベルを生成）
    // 50が基準色、0が黒に近づく、100が白に近づく
    // 実際に使用する範囲はColorPalette.vueで制御
    @for $level from 0 through 100 {
      --#{$color-name}-#{$level}: #{calc-color($color-name, $level)};
    }
  }
}
